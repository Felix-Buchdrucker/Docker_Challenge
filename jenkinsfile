node {
    stage("Preparation"){
        checkout scm
    }
    environment {
    registry = "buchdfel/docker-project"
    registryCredential = "DOCKERHUBID"
    }
        stage("Login"){
            withCredentials([usernamePassword(credentialsId: 'DockerHUBID', passwordVariable: 'pass', usernameVariable: 'user')]){
            sh "docker login --username $user --password $pass"
            }
        }
        stage("Execution"){
            sh "docker pull buchdfel/docker-project:latest"
            sh "docker run buchdfel/docker-project:latest" 
        }
}
